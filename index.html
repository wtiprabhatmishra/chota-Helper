<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chhota Helper - Tumhara Project Dost</title>
    <style>
        body {
            font-family: 'Comic Sans MS', cursive;
            background: linear-gradient(135deg, #f0f8ff, #e6e6fa);
            text-align: center;
            margin: 0;
            padding: 20px;
            animation: fadeIn 1s ease-in;
        }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        h1 {
            color: #ff4500;
            font-size: 45px;
            text-shadow: 3px 3px #ffd700;
            animation: bounce 2s infinite;
        }
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }
        #chat-container {
            width: 70%;
            margin: 30px auto;
            background-color: #fffacd;
            padding: 25px;
            border-radius: 20px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.3);
        }
        #chat-box {
            height: 350px;
            overflow-y: auto;
            background-color: #f0fff0;
            padding: 15px;
            border-radius: 15px;
            border: 3px solid #32cd32;
            margin-bottom: 20px;
        }
        .message {
            padding: 12px;
            margin: 8px;
            border-radius: 12px;
            animation: slideIn 0.5s ease-in;
        }
        @keyframes slideIn { from { transform: translateX(-100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
        .bot-message { background-color: #87cefa; color: #000; text-align: left; }
        .user-message { background-color: #ffb6c1; color: #000; text-align: right; }
        #input-area { display: flex; gap: 15px; justify-content: center; }
        #user-input {
            width: 60%;
            padding: 12px;
            border: 3px solid #ff69b4;
            border-radius: 12px;
            font-size: 18px;
        }
        #send-btn, #lang-btn {
            padding: 12px 25px;
            background-color: #ff69b4;
            color: white;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-size: 18px;
            transition: transform 0.2s;
        }
        #send-btn:hover, #lang-btn:hover {
            transform: scale(1.1);
            background-color: #ff1493;
        }
        footer {
            margin-top: 20px;
            font-size: 14px;
            color: #ff4500;
            text-shadow: 1px 1px #ffd700;
        }
        footer a {
            color: #ff69b4;
            text-decoration: none;
        }
        footer a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <h1>Chhota Helper</h1>
    <div id="chat-container">
        <div id="chat-box">
            <div class="message bot-message" id="welcome-msg">
                Hello, chhote dost! Main hoon Chhota Helper ‚Äì tumhara project buddy! üåü<br>
                Batao: Class number aur Topic (e.g., "Class 5, Volcano")<br>
                Main pura research karke text, chart, aur image ideas doonga!
            </div>
        </div>
        <div id="input-area">
            <input type="text" id="user-input" placeholder="Class aur Topic likho...">
            <button id="send-btn" onclick="sendMessage()">Send</button>
            <button id="lang-btn" onclick="toggleLanguage()">Hindi</button>
        </div>
    </div>
    <footer>
        Powered by <a href="http://webtechinfinity.com" target="_blank">webtechinfinity.com</a>
    </footer>

    <script>
        let isHindi = false;

        function adjustLevel(classNum) {
            if (classNum >= 1 && classNum <= 2) return "simple";
            if (classNum >= 3 && classNum <= 5) return "medium";
            if (classNum >= 6 && classNum <= 8) return "detailed";
            return "invalid";
        }

        function toggleLanguage() {
            isHindi = !isHindi;
            document.getElementById("lang-btn").innerText = isHindi ? "English" : "Hindi";
            const welcomeMsg = isHindi ? 
                "‡§π‡§æ‡§Ø, ‡§õ‡•ã‡§ü‡•á ‡§¶‡•ã‡§∏‡•ç‡§§! ‡§Æ‡•à‡§Ç ‡§π‡•Ç‡§Å ‡§õ‡•ã‡§ü‡§æ ‡§π‡•á‡§≤‡•ç‡§™‡§∞ ‚Äì ‡§§‡•Å‡§Æ‡•ç‡§π‡§æ‡§∞‡§æ ‡§™‡•ç‡§∞‡•ã‡§ú‡•á‡§ï‡•ç‡§ü ‡§¶‡•ã‡§∏‡•ç‡§§! üåü<br>‡§¨‡§§‡§æ‡§ì: ‡§ï‡•ç‡§≤‡§æ‡§∏ ‡§®‡§Ç‡§¨‡§∞ ‡§î‡§∞ ‡§ü‡•â‡§™‡§ø‡§ï (‡§ú‡•à‡§∏‡•á '‡§ï‡•ç‡§≤‡§æ‡§∏ 5, ‡§µ‡•ã‡§≤‡•ç‡§ï‡•á‡§®‡•ã')<br>‡§Æ‡•à‡§Ç ‡§™‡•Ç‡§∞‡§æ ‡§∞‡§ø‡§∏‡§∞‡•ç‡§ö ‡§ï‡§∞‡§ï‡•á ‡§ü‡•á‡§ï‡•ç‡§∏‡•ç‡§ü, ‡§ö‡§æ‡§∞‡•ç‡§ü, ‡§î‡§∞ ‡§á‡§Æ‡•á‡§ú ‡§Ü‡§á‡§°‡§ø‡§Ø‡§æ‡§ú‡§º ‡§¶‡•Ç‡§Ç‡§ó‡§æ!" :
                "Hello, chhote dost! Main hoon Chhota Helper ‚Äì tumhara project buddy! üåü<br>Batao: Class number aur Topic (e.g., 'Class 5, Volcano')<br>Main pura research karke text, chart, aur image ideas doonga!";
            document.getElementById("welcome-msg").innerHTML = welcomeMsg;
        }

        async function fetchWikipedia(topic) {
            const url = `https://en.wikipedia.org/w/api.php?action=query&prop=extracts&exintro&explaintext&format=json&titles=${encodeURIComponent(topic)}&origin=*`;
            try {
                addMessage(isHindi ? "‡§•‡•ã‡§°‡§º‡§æ ‡§∞‡•Å‡§ï‡•á‡§Ç, ‡§Æ‡•à‡§Ç ‡§¢‡•Ç‡§Ç‡§¢ ‡§∞‡§π‡§æ ‡§π‡•Ç‡§Å..." : "Wait a sec, I‚Äôm researching...", "bot-message");
                const response = await fetch(url);
                const data = await response.json();
                const pages = data.query.pages;
                const pageId = Object.keys(pages)[0];
                if (pageId === "-1" || !pages[pageId].extract) {
                    return null;
                }
                const extract = pages[pageId].extract;
                return extract.split(". ").map(s => s + ".");
            } catch (error) {
                console.error("API Error:", error);
                return null;
            }
        }

        function generateResponse(classNum, topic, level, sentences) {
            const langSuffix = isHindi ? "hi" : "en";
            let text, chart, image;

            // Adjust text by class level
            if (sentences) {
                if (level === "simple") {
                    text = sentences[0]; // First sentence only
                } else if (level === "medium") {
                    text = sentences.slice(0, 2).join(" "); // First 2 sentences
                } else {
                    text = sentences.slice(0, 4).join(" "); // Up to 4 sentences
                }
            } else {
                text = isHindi ? 
                    `${topic} ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§ï‡•Å‡§õ ‡§∞‡•ã‡§ö‡§ï ‡§¨‡§æ‡§§‡•á‡§Ç ‡§∏‡•Ä‡§ñ‡•á‡§Ç‡•§` : 
                    `Learn some cool facts about ${topic}.`;
            }

            // Topic-specific chart and image ideas
            if (topic.toLowerCase().includes("volcano") || topic.toLowerCase().includes("earth") || topic.toLowerCase().includes("plant")) {
                chart = level === "simple" ? 
                    (isHindi ? `${topic} ‡§ï‡§æ ‡§è‡§ï ‡§Ü‡§∏‡§æ‡§® ‡§ö‡§ø‡§§‡•ç‡§∞ ‡§¨‡§®‡§æ‡§ì‡•§` : `Make a simple ${topic} drawing.`) :
                    level === "medium" ? 
                    (isHindi ? `${topic} ‡§ï‡§æ ‡§ö‡§ø‡§§‡•ç‡§∞ ‡§¨‡§®‡§æ‡§ì ‡§î‡§∞ ‡§®‡§æ‡§Æ ‡§≤‡§ø‡§ñ‡•ã‡•§` : `Draw ${topic} with labels.`) :
                    (isHindi ? `${topic} ‡§ï‡§æ ‡§µ‡§ø‡§∏‡•ç‡§§‡•É‡§§ ‡§ö‡§ø‡§§‡•ç‡§∞ ‡§¨‡§®‡§æ‡§ì, ‡§∞‡§Ç‡§ó ‡§î‡§∞ ‡§®‡§æ‡§Æ‡•ã‡§Ç ‡§ï‡•á ‡§∏‡§æ‡§•‡•§` : `Create a detailed ${topic} diagram with colors and labels.`);
                image = isHindi ? `${topic} ‡§ï‡•Ä ‡§è‡§ï ‡§§‡§∏‡•ç‡§µ‡•Ä‡§∞ ‡§¢‡•Ç‡§Ç‡§¢‡•ã‡•§` : `Find a picture of ${topic}.`;
            } else if (topic.toLowerCase().includes("fraction") || topic.toLowerCase().includes("number") || topic.toLowerCase().includes("math")) {
                chart = level === "simple" ? 
                    (isHindi ? `${topic} ‡§ï‡§æ ‡§õ‡•ã‡§ü‡§æ ‡§ü‡•á‡§¨‡§≤ ‡§¨‡§®‡§æ‡§ì‡•§` : `Draw a small ${topic} table.`) :
                    level === "medium" ? 
                    (isHindi ? `${topic} ‡§ï‡§æ ‡§ü‡•á‡§¨‡§≤ ‡§¨‡§®‡§æ‡§ì‡•§` : `Make a ${topic} table.`) :
                    (isHindi ? `${topic} ‡§ï‡§æ ‡§ó‡•ç‡§∞‡§æ‡§´ ‡§¨‡§®‡§æ‡§ì ‡§â‡§¶‡§æ‡§π‡§∞‡§£‡•ã‡§Ç ‡§ï‡•á ‡§∏‡§æ‡§•‡•§` : `Draw a ${topic} graph with examples.`);
                image = isHindi ? `${topic} ‡§ï‡§æ ‡§â‡§¶‡§æ‡§π‡§∞‡§£ ‡§ö‡§ø‡§§‡•ç‡§∞ ‡§≤‡§æ‡§ì‡•§` : `Get an example picture of ${topic}.`;
            } else {
                chart = level === "simple" ? 
                    (isHindi ? `${topic} ‡§ï‡§æ ‡§Ü‡§∏‡§æ‡§® ‡§ö‡§ø‡§§‡•ç‡§∞ ‡§¨‡§®‡§æ‡§ì‡•§` : `Draw a simple ${topic} picture.`) :
                    level === "medium" ? 
                    (isHindi ? `${topic} ‡§ï‡§æ ‡§®‡§ï‡•ç‡§∂‡§æ ‡§¨‡§®‡§æ‡§ì‡•§` : `Make a ${topic} map.`) :
                    (isHindi ? `${topic} ‡§ï‡§æ ‡§µ‡§ø‡§∏‡•ç‡§§‡•É‡§§ ‡§ö‡§æ‡§∞‡•ç‡§ü ‡§Ø‡§æ ‡§ü‡§æ‡§á‡§Æ‡§≤‡§æ‡§á‡§® ‡§¨‡§®‡§æ‡§ì‡•§` : `Create a detailed ${topic} chart or timeline.`);
                image = isHindi ? `${topic} ‡§ï‡§æ ‡§´‡•ã‡§ü‡•ã ‡§Ø‡§æ ‡§®‡§ï‡•ç‡§∂‡§æ ‡§¢‡•Ç‡§Ç‡§¢‡•ã‡•§` : `Find a photo or map of ${topic}.`;
            }

            return { text, chart, image };
        }

        async function sendMessage() {
            const userInput = document.getElementById("user-input").value.trim().toLowerCase();
            if (!userInput) return;

            addMessage(userInput, "user-message");
            document.getElementById("user-input").value = "";

            if (userInput === "bye") {
                addMessage(isHindi ? "‡§¨‡§æ‡§Ø-‡§¨‡§æ‡§Ø! ‡§™‡•ç‡§∞‡•ã‡§ú‡•á‡§ï‡•ç‡§ü ‡§Æ‡•á‡§Ç ‡§Æ‡§ú‡§º‡•á ‡§ï‡§∞‡•ã!" : "Bye-bye! Project mein maza karna!", "bot-message");
                return;
            }

            try {
                const parts = userInput.split(",");
                const classNum = parseInt(parts[0].replace("class", "").trim());
                const topic = parts[1].trim().charAt(0).toUpperCase() + parts[1].trim().slice(1);

                const level = adjustLevel(classNum);
                if (level === "invalid") {
                    addMessage(isHindi ? "‡§ï‡•ç‡§≤‡§æ‡§∏ 1 ‡§∏‡•á 8 ‡§§‡§ï ‡§π‡•Ä ‡§¨‡•ã‡§≤‡•ã!" : "Class 1 se 8 tak hi bolo!", "bot-message");
                    return;
                }

                let response = isHindi ? 
                    `‡§π‡§æ‡§Ø, ‡§õ‡•ã‡§ü‡•á ‡§¶‡•ã‡§∏‡•ç‡§§! ‡§Ø‡•á ‡§∞‡§π‡§æ ‡§§‡•Å‡§Æ‡•ç‡§π‡§æ‡§∞‡§æ ${topic} ‡§ï‡§æ ‡§™‡•ç‡§∞‡•ã‡§ú‡•á‡§ï‡•ç‡§ü (‡§ï‡•ç‡§≤‡§æ‡§∏ ${classNum}):<br>` :
                    `Hello, chhote dost! Yeh raha tumhara ${topic} ka project (Class ${classNum}):<br>`;

                const researchData = await fetchWikipedia(topic);
                const content = generateResponse(classNum, topic, level, researchData);

                response += `Text: ${content.text}<br>`;
                response += `Chart: ${content.chart}<br>`;
                response += `${isHindi ? "‡§á‡§Æ‡•á‡§ú ‡§Ü‡§á‡§°‡§ø‡§Ø‡§æ" : "Image Idea"}: ${content.image}<br>`;

                addMessage(response, "bot-message");
            } catch (e) {
                addMessage(isHindi ? "‡§ï‡•Å‡§õ ‡§ó‡§≤‡§§ ‡§¨‡•ã‡§≤‡§æ ‡§§‡•Å‡§Æ‡§®‡•á, ‡§†‡•Ä‡§ï ‡§∏‡•á ‡§¨‡•ã‡§≤‡•ã ‡§ú‡•à‡§∏‡•á 'Class 5, Volcano'!" : 
                    "Kuch galat bola tumne, thik se bolo jaise 'Class 5, Volcano'!", "bot-message");
            }
        }

        function addMessage(text, className) {
            const chatBox = document.getElementById("chat-box");
            const messageDiv = document.createElement("div");
            messageDiv.className = `message ${className}`;
            messageDiv.innerHTML = text;
            chatBox.appendChild(messageDiv);
            chatBox.scrollTop = chatBox.scrollHeight;
        }

        document.getElementById("user-input").addEventListener("keypress", function(e) {
            if (e.key === "Enter") sendMessage();
        });
    </script>
</body>
</html>
